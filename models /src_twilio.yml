version: 2

sources:
  - name: twilio
    database: "{{var ('twilio_database', target.database)}}"
    schema: "{{var ('twilio_schema', 'twilio')}}"

    loader: fivetran
    loaded_at_field: _fivetran_synced
      
    freshness:
      warn_after: {count: 72, period: hour}
      error_after: {count: 168, period: hour}


    tables:
      - name: account_history
        identifier: "{{ var('twilio_account_history_identifier', 'account_history' )}}"
        description:
        columns:
          - name: created_at
            description: The date and time when the account history record was created.

          - name: friendly_name
            description: A user-friendly name or label associated with the account history event.

          - name: id
            description: The unique identifier for the account history record.

          - name: owner_account_id
            description: The unique identifier of the owner account associated with the event.

          - name: status
            description: The status or state of the account history event.

          - name: type
            description: The type or category of the account history event.

          - name: updated_at
            description: The date and time when the account history record was last updated.
                
      - name: address
        identifier: "{{ var('twilio_address_identifier', 'address' )}}"
        description:
        columns:
          - name: account_id
            description: >
              The unique identifier of the account associated with the address.

          - name: city
            description: >
              The city or locality of the address.

          - name: created_at
            description: >
              The timestamp indicating when the address record was created.

          - name: customer_name
            description: >
              The name of the customer or contact associated with the address.

          - name: emergency_enabled
            description: >
              A boolean value indicating whether emergency services are enabled for the address.

          - name: friendly_name
            description: >
              A user-friendly name or label associated with the address.

          - name: id
            description: >
              The unique identifier for the address record.

          - name: iso_country
            description: >
              The ISO country code of the address.

          - name: postal_code
            description: >
              The postal code or ZIP code of the address.

          - name: region
            description: >
              The region or state of the address.

          - name: street
            description: >
              The street address.

          - name: updated_at
            description: >
              The timestamp indicating when the address record was last updated.

          - name: validated
            description: >
              A boolean value indicating whether the address has been validated.

          - name: verified
            description: >
              A boolean value indicating whether the address has been verified.
        
      - name: call
        identifier: "{{ var('twilio_call_identifier', 'call' )}}"
        description: Each record represents a phone call that occurred or is scheduled to occur.
        columns:
          - name: account_id
            description: >
              The unique identifier for the Account responsible for this Call.
      
          - name: annotation
            description: >
              A user-defined string that provides additional information about the Call.
      
          - name: answered_by
            description: >
              The identity of the recipient that answered the Call.
      
          - name: caller_name
            description: >
              The caller's name, if available.
      
          - name: date_created
            description: >
              The date and time when the Call was created, given as GMT in RFC 2822 format.
      
          - name: direction
            description: >
              The direction of the Call - `inbound` for incoming calls, `outbound-api` for calls initiated via the REST API, and `outbound-dial` for calls initiated by a TwiML `<Dial>` verb.
      
          - name: duration
            description: >
              The duration of the Call in seconds.
      
          - name: end_time
            description: >
              The date and time when the Call ended, given as GMT in RFC 2822 format.
      
          - name: forwarded_from
            description: >
              The phone number that initiated the Call, if applicable.
      
  - name: from
            description: >
              The phone number or client identifier that made the Call.
      
          - name: from_formatted
            description: >
              The formatted version of the `from` phone number or client identifier.
      
          - name: group_id
            description: >
              The unique identifier for the grouping of related Calls.
      
          - name: id
            description: >
              The unique identifier for the Call resource.
      
          - name: outgoing_caller_id
            description: >
              The unique identifier for the Outgoing Caller ID resource associated with the Call.
      
          - name: parent_call_id
            description: >
              The unique identifier for the Call that created this Call as a result of executing TwiML.
      
          - name: price
            description: >
              The cost of the Call in the specified `price_unit`.
      
          - name: price_unit
            description: >
              The currency unit in which the `price` is measured.
      
          - name: queue_time
            description: >
              The time spent in the queue before the Call was answered, in seconds.
      
          - name: start_time
            description: >
              The date and time when the Call started, given as GMT in RFC 2822 format.
      
          - name: status
            description: >
              The current status of the Call - `queued`, `ringing`, `in-progress`, `completed`, `busy`, `failed`, `no-answer`, or `canceled`.
      
          - name: to
            description: >
              The phone number or client identifier that received the Call.
      
          - name: to_formatted
            description: >
              The formatted version of the `to` phone number or client identifier.
      
          - name: trunk_id
            description: >
              The unique identifier for the Trunk resource associated with the Call.
      
          - name: date_updated
            description: >
              The date and time when the Call record was last updated, given as GMT in RFC 2822 format.
        
      - name: incoming_phone_number
        identifier: "{{ var('twilio_incoming_phone_number_identifier', 'incoming_phone_number' )}}"
        description: Each record represents a phone number that is capable of receiving incoming voice, SMS, or MMS messages.
        columns: 
          - name: account_id
            description: >
              The unique identifier of the Account that owns this phone number resource.

          - name: address_id
            description: >
              The unique identifier of the Address resource responsible for the phone number.

          - name: address_requirements
            description: >
              The specific requirements for the Address on this phone number.

          - name: beta
            description: >
              Whether this phone number is a beta number.

          - name: capabilities.mms
            description: >
              Indicates whether this phone number is capable of sending and receiving MMS messages.

          - name: capabilities.sms
            description: >
              Indicates whether this phone number is capable of sending and receiving SMS messages.

          - name: capabilities.voice
            description: >
              Indicates whether this phone number is capable of making and receiving voice calls.

          - name: date_created
            description: >
              The date and time this phone number resource was created.

          - name: emergency_address_id
            description: >
              The unique identifier of the Address resource to be used in case of an emergency.

          - name: emergency_status
            description: >
              The emergency status of the phone number.

          - name: friendly_name
            description: >
              A human-readable name associated with the phone number.

          - name: id
            description: >
              The unique identifier for this phone number resource.

          - name: origin
            description: >
              The origination type of the phone number.

          - name: phone_number
            description: >
              The phone number in E.164 format.

          - name: trunk_id
            description: >
              The unique identifier of the Trunk resource responsible for the phone number.

          - name: date_updated
            description: >
              The date and time this phone number resource was last updated.

          - name: voice_caller_id_lookup
            description: >
              Indicates whether the phone number performs a lookup of the caller ID.

          - name: voice_url
            description: >
              The URL Twilio will request when receiving a voice call to this phone number.
        
      - name: message
        identifier: "{{ var('twilio_message_identifier', 'message' )}}"
        description:  Each record represents an individual outbound or inbound message.
        columns:
          - name: account_id
            description: The unique identifier of the Account that sent or received the message.

          - name: body
            description: The text of the message.

          - name: created_at
            description: The timestamp indicating when the message was created.

          - name: date_sent
            description: The timestamp indicating when the message was sent.

          - name: direction
            description: The direction of the message. Either `inbound` for inbound messages or `outbound-api` for outbound messages initiated via the REST API.

          - name: error_code
            description: The error code associated with the message, if applicable.

          - name: error_message
            description: The error message associated with the message, if applicable.

          - name: from
            description: The phone number or sender ID that sent the message.

          - name: id
            description: The unique identifier for the message.

          - name: messaging_service_id
            description: The unique identifier of the messaging service associated with the message.

          - name: num_media
            description: The number of media (e.g., images, videos) included in the message.

          - name: num_segments
            description: The number of segments the message contains.

          - name: price
            description: The cost of the message.

          - name: price_unit
            description: The currency unit for the message cost.

          - name: status
            description: The status of the message.

          - name: to
            description: The phone number or recipient ID that received the message.

          - name: updated_at
            description: The timestamp indicating when the message was last updated.
        
      - name: messaging_service
        identifier: "{{ var('twilio_messaging_service_identifier', 'messaging_service' )}}"
        description:
        columns:
          - name: account_id
            description: >
              The unique identifier of the account that owns the messaging service.

          - name: area_code_geomatch
            description: >
              Specifies whether phone numbers used by this messaging service are required to be geo-matched to the message sender's area code.

          - name: created_at
            description: >
              The date and time when the messaging service was created.

          - name: fallback_method
            description: >
              The HTTP method Twilio will use to send requests to the fallback URL when an error occurs in the messaging service.

          - name: fallback_to_long_code
            description: >
              Specifies whether to fallback to long code phone numbers when short code phone numbers are not available or cannot be used.

          - name: fallback_url
            description: >
              The URL that Twilio will request if an error occurs in the messaging service and the fallback method is set to "POST" or "GET".

          - name: friendly_name
            description: >
              A human-readable descriptive name for the messaging service.

          - name: id
            description: >
              The unique identifier of the messaging service.

          - name: inbound_method
            description: >
              The HTTP method Twilio will use to send requests to the inbound request URL of the messaging service.

          - name: inbound_request_url
            description: >
              The URL that Twilio will request to pass inbound messages to the messaging service.

          - name: mms_converter
            description: >
              Specifies the method to convert outbound MMS content.

          - name: scan_message_content
            description: >
              Specifies whether to scan the content of outbound messages sent using the messaging service for harmful or unwanted content.

          - name: smart_encoding
            description: >
              Specifies whether Twilio should attempt to optimize the message encoding for the messaging service.

          - name: status_callback
            description: >
              The URL that Twilio will request to pass status updates of sent messages to the messaging service.

          - name: sticky_sender
            description: >
              Specifies whether to assign a single sender phone number for all outbound messages sent from the messaging service.

          - name: synchronous_validation
            description: >
              Specifies whether to enable or disable synchronous validation of requests to the messaging service.

          - name: updated_at
            description: >
              The date and time when the messaging service was last updated.

          - name: us_app_to_person_routing_enabled
            description: >
              Specifies whether to enable or disable routing inbound messages to the messaging service using US App-to-Person (A2P) routing.

          - name: use_inbound_webhooks
            description: >
              Specifies whether to use inbound webhooks for handling incoming messages to the messaging service.

          - name: usecase
            description: >
              Specifies the intended use case of the messaging service.

          - name: validity_period
            description: >
              Specifies the duration (in seconds) that Twilio should attempt to deliver an outbound message from the messaging service.
        
      - name: outgoing_caller_id
        identifier: "{{ var('twilio_outgoing_caller_id_identifier', 'outgoing_caller_id' )}}"
        description:
        columns:
          - name: created_at
            description: The date and time the messaging service resource was created.

          - name: friendly_name
            description: A user-defined string that identifies this messaging service resource.

          - name: id
            description: The unique string that identifies the messaging service resource.

          - name: phone_number
            description: The phone number associated with this messaging service.

          - name: updated_at
            description: The date and time the messaging service resource was last updated.
        
      - name: usage_record
        identifier: "{{ var('twilio_usage_record_identifier', 'usage_record' )}}"
        description: Each record provides details about resource consumption in Twilio.
        columns:
          - name: account_id
            description: The unique identifier of the account associated with the usage record.

          - name: as_of
            description: The timestamp when the usage record was generated.

          - name: category
            description: The category of the resource or service being measured.

          - name: count
            description: The count or quantity of the resource consumed.

          - name: count_unit
            description: The unit of measurement for the count or quantity.

          - name: description
            description: A brief description or summary of the usage record.

          - name: end_date
            description: The end date of the usage period for the record.

          - name: price
            description: The cost or price associated with the resource usage.

          - name: price_unit
            description: The currency unit for the price.

          - name: start_date
            description: The start date of the usage period for the record.

          - name: usage
            description: The value or measurement of the resource consumed.

          - name: usage_unit
            description: The unit of measurement for the resource consumption value.
        

